<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="CFP.css">
    <script src="AddorRetire.js"></script>
    <title>課程查詢頁面</title>
    <img src="imgs/pic1.jpg" height="60px">
</head>
<body>
<div>查詢結果 : 1筆</div>

<div>
    <button class="btn" class="btn" onclick="location.href='#'">重新搜尋</button>
    <!--    #是CourcePage的網址到時候記得放!!!!!!!-->
</div>

<table id="courseTable" cellspacing="0">
    <thead>
    <tr>
        <th>選課代碼</th>
        <th>課程名稱</th>
        <th>學分</th>
        <th>必選修</th>
        <th>開課班級</th>
        <th>上課時間/上課教室/授課教師</th>
        <th>實收名額/開放名額</th>
        <th class="add-retire-header">加選/退選</th> <!-- 添加类到表头 -->
    </tr>
    </thead>
    <tbody>
    <!--            <td>100000000</td>-->
    <!--            <td>1</td>-->
    <!--            <td>1</td>-->
    <!--            <td id="abs">1</td>-->
    <!--            <td>1</td>-->
    <!--            <td>1</td>-->
    <!--            <td>60/60</td>-->
    <!--            <td><input type="submit" value="加選" id="add-btn">-->
    </tbody>
</table>

<script type="text/javascript">
    window.onload = function() {
        var data = [
            {
                code: 1322,
                name: '阿巴阿巴',
                credit: 3,
                abs: 1,
                class: '資訊二甲',
                teacher: 'Yi-Phen Liu',
                people: '60/60'
            },
            {
                code: 1312,
                name: '巴拉巴拉',
                credit: 3,
                abs: 0,
                class: '資訊二合',
                teacher: 'Ben Liu',
                people: '60/60'
            },
            {
                code: 1310,
                name: '資料庫',
                credit: 3,
                abs: 1,
                class: '資訊二乙',
                teacher: 'Huai-Chun Hsu',
                people: '60/60'
            }
        ];

        var tbody = document.querySelector('tbody');
        for (var i = 0; i < data.length; i++) {
            var tr = document.createElement('tr');
            tbody.appendChild(tr);
            for (var k in data[i]) {
                var td = document.createElement('td');
                td.innerHTML = data[i][k];
                tr.appendChild(td);
            }
            var addButton = document.createElement('input');
            addButton.type = 'submit';
            addButton.value = '加選';
            addButton.id = 'add-btn-' + i; // 使用唯一的id
            tr.appendChild(addButton);

            addButton.onclick = function () {
                var buttonId = this.id.split('-')[2]; // 提取按钮的索引号
                var absValue = data[buttonId].abs;

                if (this.value === '加選') {
                    alert('加選成功');
                    this.value = '退選';
                } else if (this.value === '退選' && absValue === 1) {
                    alert('退選失敗，必修課如果需要退選請去找助教');
                } else if (this.value === '退選') {
                    alert('退選成功');
                    this.value = '加選';
                }
            };
        }
    };
</script>

</body>
</html>
